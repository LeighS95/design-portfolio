---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "../../../layouts/BlogPost.astro";
import { render } from "astro:content";

export async function getStaticPaths() {
	const pages = await getCollection("blog");

	const paths = pages.map((page) => {
		const [lang, ...slug] = page.slug.split("/");
		return {
			params: { lang, slug: slug.join("/") || undefined },
			props: page,
		};
	});

	return paths;
}
type Props = CollectionEntry<"blog">;

const { lang, slug } = Astro.params;
const page = Astro.props;
const formattedData = page.data.pubDate.toLocaleString(lang);
const { Content } = await render(page);
---

<BlogPost {...page.data}>
	<Content />
</BlogPost>
