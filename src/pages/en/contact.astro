---
import MainLayout from "../../layouts/MainLayout.astro";
---

<MainLayout>
    <h2 class="text-xl font-bold text-center">Contact Me</h2>
    <div
        class="text-black dark:text-white max-w-xl mx-auto p-4 rounded-2xl shadow-lg flex flex-col space-y-8 bg-zinc-100 dark:bg-zinc-800"
    >
        <!-- Chat bubbles -->
        <div class="space-y-4">
            <div class="bg-gray-200 p-3 rounded-xl max-w-[80%] self-start">
                Hello! Need help?
            </div>
            <div
                class="bg-blue-500 text-white p-3 rounded-xl max-w-[80%] self-end ml-auto"
            >
                Yes please!
            </div>
        </div>

        <!-- Message input -->
        <form id="message-form" class="flex items-center space-x-2">
            <a
                href="mailto:leigh.s95@outlook.com"
                class="text-blue-500 hover:text-blue-700"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-mail-icon lucide-mail"
                    ><rect width="20" height="16" x="2" y="4" rx="2"
                    ></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"
                    ></path></svg
                >
            </a>
            <input
                type="text"
                name="message"
                placeholder="Type your message..."
                class="flex-1 p-2 border rounded-xl focus:outline-none focus:ring"
            />
            <button
                type="submit"
                class="bg-blue-500 text-white px-4 py-2 rounded-xl transition-all hover:bg-blue-600 cursor-pointer"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-send-icon lucide-send"
                    ><path
                        d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"
                    ></path><path d="m21.854 2.147-10.94 10.939"></path></svg
                >
            </button>
        </form>
    </div>

    <script>
        import { actions } from "astro:actions";

        const form = document.querySelector("form")!;
        form?.addEventListener("submit", async (e) => {
            e.preventDefault();
            // Show alert pop-up with greeting from action
            const formData = new FormData(form);
            const { data, error } =
                await actions.messenger.sendMessage(formData);
            if (!error) alert(data);
        });
    </script>
</MainLayout>
